# Scope

Одна из самых фундаментальных парадигм почти всех языков программирования — возможность сохранять значения в переменных, а позже – извлекать или менять эти значения. Собственно говоря, возможность хранить значения и извлекать значения из переменных — это то, что дает программе _состояние._

Но включение переменных в нашу программу порождает самые интересные вопросы, которые мы теперь можем задать: где эти переменные _живут_? Другими словами: где они хранятся? И, что более важно, как наша программа их находит, когда нуждается в них?

## Понимание области видимости

Чтобы обработать программу `var a = 2;` , необходимо:

1. _Движок_: отвечает за компиляцию от начала до конца и за выполнение нашей JavaScript программы.
2. _Компилятор: _выполняет всю работу по парсингу и генерации кода.
3. _Область видимости: _собирает и обслуживает список поиска всех объявленных идентификаторов \(переменных\) и следит за исполнением строгого набора правил, которые как идентификаторы доступны для кода, выполняемого в текущий момент.

Когда вы видите программу `var a = 2;`, вы, вероятнее всего, подумаете о ней как об одном операторе. _Движок _видит два отдельных оператора: один – который _Компилятор _обработает во время компиляции, а другой – который _Движок _обработает во время выполнения.

Первая вещь, которую сделает _Компилятор _с этой программой – выполнит разбиение на лексемы, которые он затем распарсит в дерево. Но, когда _Компилятор _доберется до генерации кода, он будет интерпретировать программу несколько по-другому, нежели предполагалось.

_Компилятор _сделает следующее:

1. Встретив `var a`, _Компилятор _просит _Область видимости _посмотреть, существует ли уже переменная `a` в коллекции указанной области видимости. Если да, то _Компилятор _игнорирует это объявление переменной и двигается дальше. В противном случае, _Компилятор _просит _Область видимости _объявить новую переменную `a` в коллекции указанной области видимости.
2. Затем _Компилятор _генерирует код для _Движка _для последующего выполнения, чтобы обработать присваивание `a = 2`. Код, который _Движок _запускает, сначала спрашивает _Область видимости, _есть ли переменная с именем `a`, доступная в коллекции текущей области видимости. Если да, то _Движок _использует эту переменную. Если нет, то _Движок _ищет _в другом месте._

Если _Движок _в итоге находит переменную, он присваивает ей значение `2`. Если нет, то _Движок выкинет_ ошибку.

Подводя итоги: для присваивания значения переменной выполняется два отдельных действия: первое, когда _Компилятор _объявляет переменную \(если не была объявлена до этого в текущей области видимости\), и второе, когда выполняет код, _Движок _ищет эту переменную в _Области видимости _и присваивает ей значение, если находит.

